{"version":3,"sources":["../../server/tests/groupsControllersTests.js"],"names":["should","use","token","describe","before","done","request","post","type","send","password","username","end","err","res","have","status","body","it","set","name","desc","usersIds","message","priority","get"],"mappings":"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","file":"groupsControllersTests.js","sourcesContent":["import chaiHttp from 'chai-http';\nimport chai from 'chai';\nimport app from '../app';\n\nconst should = chai.should();\nchai.use(chaiHttp);\nlet token;\n\ndescribe('usersControllersTests ', () => {\n  before((done) => {\n    chai.request(app)\n    .post('/api/v1/users/signin/')\n    .type('form')\n    .send({\n      password: 'testuser',\n      username: 'testuser'\n    })\n    .end((err, res) => {\n      res.should.have.status(202);\n      token = res.body.token;\n      done();\n    });\n  });\n\n  describe('Create a new group', () => {\n    it('returns 201 response', () => {\n      chai.request(app)\n      .post('/api/v1/groups/')\n      .set('x-access-token', token)\n      .type('form')\n      .send({ name: 'Test Group', desc: 'A simple test group' })\n      .end((err, res) => {\n        res.should.have.status(201);\n      });\n    });\n  });\n\n  describe('Add user to a new group', () => {\n    it('should return 200 to add a user to a group', (done) => {\n      chai.request(app)\n      .post('/api/v1/groups/1/user/')\n      .type('form')\n      .set('x-access-token', token)\n      .send({\n        usersIds: '[2]',\n      })\n      .end((err, res) => {\n        res.should.have.status(200);\n        done();\n      });\n    });\n  });\n\n  describe('Send message to a group', () => {\n    it('returns 200 response', (done) => {\n      chai.request(app)\n      .post('/api/v1/groups/1/message/')\n      .set('x-access-token', token)\n      .type('form')\n      .send({\n        message: 'test message'\n      })\n      .end((err, res) => {\n        res.should.have.status(201);\n        done();\n      });\n    });\n    it('should work with priority level critical', (done) => {\n      chai.request(app)\n      .post('/api/v1/groups/1/message/')\n      .set('x-access-token', token)\n      .type('form')\n      .send({\n        message: 'test message',\n        priority: 'critical'\n      })\n      .end((err, res) => {\n        res.should.have.status(201);\n        done();\n      });\n    });\n    it('should work with priority level urgent', (done) => {\n      chai.request(app)\n      .post('/api/v1/groups/1/message/')\n      .set('x-access-token', token)\n      .type('form')\n      .send({\n        message: 'test message',\n        priority: 'urgent'\n      })\n      .end((err, res) => {\n        res.should.have.status(201);\n        done();\n      });\n    });\n    it('should not with priority level dope', (done) => {\n      chai.request(app)\n      .post('/api/v1/groups/1/message/')\n      .set('x-access-token', token)\n      .type('form')\n      .send({\n        message: 'test message',\n        priority: 'dope'\n      })\n      .end((err, res) => {\n        res.should.have.status(400);\n        done();\n      });\n    });\n  });\n\n  describe('View all messages in a group', () => {\n    it('returns 200 response', (done) => {\n      chai.request(app)\n      .get('/api/v1/groups/1/messages/')\n      .set('x-access-token', token)\n      .type('form')\n      .send()\n      .end((err, res) => {\n        res.should.have.status(200);\n        done();\n      });\n    });\n  });\n\n  describe('Get messages in a group', () => {\n    it('returns 404', (done) => {\n      chai.request(app)\n      .post('/api/v1/groups/a/messages/')\n      .type('form')\n      .set('x-access-token', token)\n      .send()\n      .end((err, res) => {\n        res.should.have.status(404);\n        done();\n      });\n    });\n  });\n});\n"]}